# Pg-Antrl4
****
**Краткое описание на русском:** Pg-Antrl4 - инструмент для генерации оптимизированных хранимых процедур PostgreSql, реализованная с использованием библиотеки [Antrl4](https://github.com/antlr/antlr4), описаны правила для лексера и парсера для языка plpgsql. 
Основной функционал Pg-Antrl4 - парсинг входной ХП с вызовами подХП и их модификация с целью оптимизации. На выходе мы получаем новую ХП с исключенными вызовами подпроцедур, что ускоряет ее выполнение т.к. в результате ее вызова не требуется хранить стек вызовов. Особенно разница заметна при вызовах подпроцедур в цикле. Например, имея 2 уровня вложенности вызовов ХП, на первом уровне вложенности имея вызов подпроцедуры в цикле, был замечен прирост времени выполнения объединенной ХП, начиная с цикла = 10000 (был прирост в 1.27 раз), на цикле = 300000 наблюдали прирост в 1.68 раз.
Передавая бОльшее число параметров и имея больший уровень вложенности (например, 3) при вызове ХП в цикле мы получаем лучший результат. В результате тестирования получили прирост = 1.69 начиная с 1000 итераций, а с 5000 наблюдали прирост почти в 2 раза (1.92).

Для тестирования работы можно написать тесты с 
**Pg-Antrl4** is Java Tool for optimization Postgres stored procedures using Antrl4 parser. It's main feature

There's a common